# vault_type: manifest
# vault_domain: jamaica-we-rise
# vault_version: 1.0
# vault_purpose: Defines frontend route logic, backend linkage, and verification flow for iAscendAi × Jamaica We Rise

navigation_manifest:
  version: "2025.11.12"
  backend_url: "https://jamaica-we-rise.onrender.com"
  environment: "production"
  structure: "static → dynamic → verified"

routes:
  donate:
    path: "/index.html"
    title: "Donation Portal"
    purpose: "Collect verified SoulAidⓈ donations through Stripe checkout."
    flow:
      - Loads config.js for backend URL
      - Calls POST /create-checkout-session
      - Redirects to Stripe Checkout
      - Receives session_id → success.html
    backend_endpoints:
      - POST /create-checkout-session
      - GET /verify-donation/:sessionId
      - GET /registry
    next: "/success.html"

  success:
    path: "/success.html"
    title: "Donation Success & SoulMarkⓈ Verification"
    purpose: "Verifies Stripe payment and issues SoulMarkⓈ."
    flow:
      - Read session_id from query string
      - Call GET /verify-donation/:sessionId
      - Save donor_email, donor_soulmark, donation_amount → localStorage
      - Display verified data
      - Continue → registration
    backend_endpoints:
      - GET /verify-donation/:sessionId
      - GET /registry
    next: "/iascendai-register.html"

  register:
    path: "/iascendai-register.html"
    title: "Identity Registration | iAscendAi"
    purpose: "Create and register digital identity (username@iascendai)."
    flow:
      - Load email + soulmark + amount from query or localStorage
      - Autofill form
      - Validate username via GET /check-username/:username
      - Submit POST /register
      - Save identity to localStorage
      - Redirect → dashboard
    backend_endpoints:
      - GET /check-username/:username
      - POST /register
    next: "/iascendai-dashboard.html"

  dashboard:
    path: "/iascendai-dashboard.html"
    title: "Dashboard | iAscendAi × Jamaica We Rise"
    purpose: "Personal hub for verified identity and SoulAidⓈ history."
    tabs:
      - SoulMarkⓈ Identity
      - SoulAidⓈ Donations
      - SoulTrackerⓈ Metrics
      - Field Updates
      - Settings
    flow:
      - Load username + email + soulmark from URL or localStorage
      - Fetch registry to validate identity
      - Display verified SoulMarkⓈ, identity info, activity
    backend_endpoints:
      - GET /registry
    next:
      - "/tracker.html"
      - "/soulregistry.html"
      - "/impact-dashboard.html"
      - "/iascendai-verify.html"

  tracker:
    path: "/tracker.html"
    title: "SoulTrackerⓈ"
    purpose: "Visual live feed of total donors, funds raised, and campaign progress."
    flow:
      - Call GET /registry
      - Calculate totals + progress
      - Show last 10 donations
    backend_endpoints:
      - GET /registry
    next:
      - "/soulregistry.html"
      - "/impact-dashboard.html"

  soulregistry:
    path: "/soulregistry.html"
    title: "SoulRegistryⓈ Directory"
    purpose: "Browse verified identities and their SoulMarkⓈ status."
    flow:
      - Call GET /registry
      - Sort verified → pending
      - Render username, name, soulmark, status, role
    backend_endpoints:
      - GET /registry
    next:
      - "/iascendai-verify.html"
      - "/iascendai-dashboard.html"

  verify:
    path: "/iascendai-verify.html"
    title: "Identity Verification | iAscendAi"
    purpose: "Search and confirm authenticity of a SoulMarkⓈ or username."
    flow:
      - User enters SoulMarkⓈ or username
      - Call GET /registry (full table)
      - Validate match
      - Display identity details
    backend_endpoints:
      - GET /registry
    next:
      - "/iascendai-register.html"
      - "/soulregistry.html"
      - "/iascendai-dashboard.html"

  impact_dashboard:
    path: "/impact-dashboard.html"
    title: "Impact Dashboard"
    purpose: "Aggregate summary of donations and verified SoulMarksⓈ."
    flow:
      - Call GET /registry
      - Compute totals: totalRaised, donorCount, verifiedCount
      - Show tables of donations + identities
      - Auto-refresh every 20 sec
    backend_endpoints:
      - GET /registry
    next:
      - "/iascendai-dashboard.html"

shared_assets:
  - "/config.js"
  - "/data/registry.json"
  - "/style.css"
  - "/favicon.ico"

deployment:
  frontend_host: "Vercel"
  backend_host: "Render"
  live_frontend: "https://jamaica-we-rise.vercel.app"
  live_backend: "https://jamaica-we-rise.onrender.com"

testing_sequence:
  - Open /index.html and donate
  - Stripe checkout redirects → /success.html?session_id=...
  - Success page confirms donation + displays SoulMarkⓈ
  - Click continue → iascendai-register.html
  - Register username → redirect dashboard
  - Dashboard loads user identity
  - Verify via soulregistry + verify pages
  - Confirm stats update on impact dashboard