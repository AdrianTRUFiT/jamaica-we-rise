<!DOCTYPE html>
<html lang="en">
<head>
  <!-- cache-bust: 2025-11-06 -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jamaica We Rise - Support Emergency Communication Network</title>
  <script src="https://js.stripe.com/v3/"></script>
  <style>
/* --- your full CSS, unchanged --- */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#000 0%,#1a1a1a 100%);color:#fff;line-height:1.6;}
.hero{min-height:60vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:60px 20px;background:linear-gradient(135deg,#000 0%,#1a4d1a 50%,#1a1a1a 100%);position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>');opacity:.3;}
.hero-content{max-width:800px;position:relative;z-index:1;}
.flag-colors{font-size:48px;margin-bottom:20px;animation:pulse 2s ease-in-out infinite;}
@keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.05);}}
h1{font-size:3.5rem;font-weight:800;margin-bottom:20px;background:linear-gradient(135deg,#FFD700 0%,#00FF00 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hero p{font-size:1.3rem;margin-bottom:30px;color:#FFD700;font-weight:500;}
.impact{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:30px;max-width:1200px;margin:-50px auto 80px;padding:0 20px;position:relative;z-index:2;}
.impact-card{background:rgba(0,0,0,.7);border:2px solid #FFD700;border-radius:12px;padding:30px;text-align:center;backdrop-filter:blur(10px);transition:transform .3s;}
.impact-card:hover{transform:translateY(-5px);}
.impact-number{font-size:3rem;font-weight:800;color:#00FF00;display:block;}
.impact-label{color:#FFD700;font-size:.9rem;text-transform:uppercase;letter-spacing:1px;margin-top:10px;}
.container{max-width:1200px;margin:0 auto;padding:60px 20px;}
.section{margin-bottom:80px;}
h2{font-size:2.5rem;margin-bottom:30px;color:#FFD700;text-align:center;}
.problem-solution{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-bottom:60px;}
.problem,.solution{background:rgba(255,255,255,.05);padding:40px;border-radius:12px;border-left:4px solid #FF0000;}
.solution{border-left-color:#00FF00;}
.problem h3,.solution h3{color:#FFD700;margin-bottom:20px;font-size:1.5rem;}
.main-cta{text-align:center;margin:60px auto;padding:60px 20px;background:linear-gradient(135deg,rgba(26,77,26,.3)0%,rgba(0,0,0,.8)100%);border-radius:20px;border:3px solid #FFD700;}
.main-cta h2{font-size:2.5rem;margin-bottom:20px;color:#00FF00;}
.main-cta-button{background:linear-gradient(135deg,#FFD700 0%,#00FF00 100%);color:#000;border:none;padding:25px 60px;font-size:1.5rem;font-weight:800;border-radius:12px;cursor:pointer;transition:transform .3s,box-shadow .3s;text-decoration:none;display:inline-block;margin-top:20px;}
.main-cta-button:hover{transform:scale(1.1);box-shadow:0 10px 40px rgba(255,215,0,.5);}
.why-donate{background:linear-gradient(135deg,rgba(0,255,0,.1)0%,rgba(0,0,0,.8)100%);border:2px solid #00FF00;border-radius:16px;padding:50px;margin:60px auto;max-width:900px;text-align:center;}
.why-donate h2{color:#00FF00;font-size:2.5rem;margin-bottom:30px;}
.why-donate p{font-size:1.2rem;line-height:1.8;color:#FFD700;margin-bottom:20px;}
.donation-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px;margin-bottom:40px;}
.donation-card{background:linear-gradient(135deg,rgba(0,0,0,.8)0%,rgba(26,77,26,.3)100%);border:2px solid #FFD700;border-radius:16px;padding:40px;text-align:center;transition:transform .3s,box-shadow .3s;cursor:pointer;}
.donation-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(255,215,0,.3);border-color:#00FF00;}
.donation-amount{font-size:3rem;font-weight:800;color:#00FF00;margin-bottom:15px;}
.donation-impact{color:#FFD700;margin-bottom:20px;min-height:60px;font-size:1.1rem;}
.custom-donation{background:rgba(0,0,0,.6);padding:40px;border-radius:16px;border:2px solid #FFD700;max-width:600px;margin:0 auto;}
.form-group{margin-bottom:20px;}
label{display:block;color:#FFD700;margin-bottom:8px;font-weight:600;}
input{width:100%;padding:15px;border-radius:8px;border:2px solid rgba(255,215,0,.3);background:rgba(0,0,0,.5);color:#fff;font-size:1rem;}
input:focus{outline:none;border-color:#FFD700;}
.donate-button{background:linear-gradient(135deg,#FFD700 0%,#00FF00 100%);color:#000;border:none;padding:15px 40px;font-size:1.1rem;font-weight:700;border-radius:8px;cursor:pointer;transition:transform .2s;width:100%;}
.donate-button:hover{transform:scale(1.05);}
.response-message{margin-top:30px;padding:20px;border-radius:8px;display:none;text-align:center;}
.response-message.success{background:rgba(0,255,0,.2);border:2px solid #00FF00;display:block;}
footer{background:#000;padding:40px 20px;text-align:center;border-top:2px solid #FFD700;}
.footer-quote{font-size:1.5rem;color:#FFD700;font-style:italic;margin-bottom:20px;}
</style>
</head>

<body>
<section class="hero">
  <div class="hero-content">
    <div class="flag-colors">üñ§üíõüíö</div>
    <h1>Jamaica We Rise</h1>
    <p>When towers fall, our voices still call for hope, to heal, to rebuild.<br>Verified donations. Verified impact. Verified humanity.</p>
  </div>
</section>

<div class="impact">
  <div class="impact-card"><span class="impact-number">600,000+</span><span class="impact-label">Have little or no reliable mobile/Internet service</span></div>
  <div class="impact-card"><span class="impact-number">700,000+</span><span class="impact-label">Need basic supplies, clean water, and/or shelter support.</span></div>
  <div class="impact-card"><span class="impact-number">100%</span><span class="impact-label">Donations are Verified & Transparent</span></div>
</div>

<div class="container">
  <div class="main-cta">
    <h2>HELP JAMAICA RISE UP</h2>
    <p style="color:#FFD700;font-size:1.2rem;margin-bottom:20px;">Your generous contribution will help build the infrastructure that keeps Jamaica connected</p>
    <a href="#donate-now" class="main-cta-button">Click Here To Make a Donation</a>
  </div>

  <div class="why-donate">
    <h2>Why Donate?</h2>
    <p>Your contribution helps secure the immediate build and deployment of this groundbreaking, verifiable, offline disaster recovery system.</p>
    <p><strong>Your donation helps rebuild and establishes Jamaica as the prototype of hope for other crisis-facing regions globally.</strong></p>
  </div>

  <section class="section" id="donate-now">
    <h2>Support Jamaica's Digital Lifeline</h2>
    <div class="donation-grid">
      <div class="donation-card" onclick="selectDonation(1)">
        <div class="donation-amount">$1</div>
        <div class="donation-impact">Start building infrastructure<br></div>
        <button class="donate-button">Donate</button>
      </div>
      <div class="donation-card" onclick="selectDonation(10)">
        <div class="donation-amount">$10</div>
        <div class="donation-impact">Help power the network<br></div>
        <button class="donate-button">Donate</button>
      </div>
      <div class="donation-card" onclick="selectDonation(50)">
        <div class="donation-amount">$50</div>
        <div class="donation-impact">Support the deployment<br></div>
        <button class="donate-button">Donate</button>
      </div>
      <div class="donation-card" onclick="selectDonation(100)">
        <div class="donation-amount">$100</div>
        <div class="donation-impact">Build resilient infrastructure<br></div>
        <button class="donate-button">Donate</button>
      </div>
    </div>

    <div class="custom-donation">
      <h3 style="color:#FFD700;text-align:center;margin-bottom:30px;">HELP JAMAICA RISE UP</h3>
      <form id="donationForm">
        <div class="form-group">
          <label for="name">Your Name</label>
          <input type="text" id="name" placeholder="Adrian McKenzie" required>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" placeholder="your@email.com" required>
        </div>
        <div class="form-group">
          <label for="amount">Custom Amount (USD)</label>
          <input type="number" id="amount" placeholder="25" min="1" required>
        </div>
        <button type="submit" class="donate-button">Click To Submit Your Donation</button>
      </form>
      <div id="responseMessage" class="response-message"></div>
    </div>
  </section>
</div>

<footer>
  <div class="footer-quote">
    Project Inside Out Jamaica<br>
    <span style="font-size:1rem;color:#00FF00;">Jamaica Rise Up</span>
  </div>
  <p style="color:#FFD700;margin-top:20px;">Built by iAscendAi √ó Project Inside Out Jamaica<br>Verified by SOUL256 Protocol</p>
</footer>

<script>
/* ---------- JS FIXED SECTION ---------- */

// initialize Stripe globally once
const stripe = Stripe("pk_live_51SPnCcBmy0RRwOoznUPpoLZmbUd6DAo7dHv4pWMk9ziA6fDcbBJtX8jPx4ahrb56xsaGbyskkgSY6ocLNE3qirCn00T1wjTDfK");

// helper to prefill amount
function selectDonation(amount){
  document.getElementById("amount").value = amount;
  document.getElementById("amount").scrollIntoView({behavior:"smooth",block:"center"});
  document.getElementById("name").focus();
}

const form = document.getElementById("donationForm");
const responseDiv = document.getElementById("responseMessage");

form.addEventListener("submit", async (e)=>{
  e.preventDefault();
  responseDiv.className="response-message";
  responseDiv.innerHTML="‚è≥ Creating secure Stripe checkout session...";
  responseDiv.style.display="block";

  const name=document.getElementById("name").value;
  const email=document.getElementById("email").value;
  const amount=Number(document.getElementById("amount").value);

  try{
    const response=await fetch("https://jamaica-we-rise.onrender.com/create-checkout-session",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({name,email,amount})
    });
    const session=await response.json();
    console.log("Session returned:",session);

    if(session.id){
      const result=await stripe.redirectToCheckout({sessionId:session.id});
      if(result.error){
        console.error("Stripe redirect error:",result.error.message);
        responseDiv.innerHTML=`‚ùå Stripe redirect error: ${result.error.message}`;
      }
    }else{
      responseDiv.innerHTML="‚ùå Failed to create checkout session.";
    }
  }catch(err){
    console.error("Network or Stripe error:",err);
    responseDiv.innerHTML="‚ùå Error connecting to Stripe. Please try again.";
  }
});
</script>
</body>
</html>
