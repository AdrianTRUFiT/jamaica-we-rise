<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iAscendAi â€“ Digital Identity Dashboard</title>

  <!-- Config -->
  <script type="module">
    import { CONFIG } from "./config.js";
    window.CONFIG = CONFIG;
  </script>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --ia-orange:#f4a349;
      --ia-orange-light:#ffb76b;
      --ia-gold:#ffc37a;
      --ia-text-light:#ffffff;
      --ia-bg-dark:#0a0a0a;
      --ia-bg-mid:#1a1a1a;
      --glass-bg:rgba(255,255,255,0.08);
      --glass-border:rgba(255,255,255,0.18);
      --verified-green:#10b981;
    }

    body{
      font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
      background:linear-gradient(135deg,var(--ia-bg-dark),var(--ia-bg-mid),var(--ia-bg-dark));
      min-height:100vh;
      color:var(--ia-text-light);
      padding:20px;
    }

    .container{max-width:1200px;margin:0 auto;}

    .header{
      text-align:center;
      margin-bottom:40px;
      padding:30px;
      background:var(--glass-bg);
      border:1px solid var(--glass-border);
      border-radius:20px;
      backdrop-filter:blur(12px);
    }

    .header h1{
      font-size:2.4em;
      font-weight:700;
      background:linear-gradient(90deg,var(--ia-orange),var(--ia-orange-light));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      margin-bottom:8px;
    }

    .tagline{
      font-size:1.75em;
      opacity:.8;
      letter-spacing:.5px;
    }

    /* NAV BAR â†’ REAL LINKS NOW */
    .tabs{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:30px;
    }

    .tab-link{
      padding:14px 24px;
      background:var(--glass-bg);
      border:2px solid var(--glass-border);
      border-radius:14px;
      font-size:1.1em;
      font-weight:600;
      color:white;
      text-decoration:none;
      backdrop-filter:blur(8px);
      transition:.3s ease;
    }

    .tab-link:hover{
      background:linear-gradient(135deg,var(--ia-orange),var(--ia-orange-light));
      color:black;
      transform:translateY(-3px);
    }

    /* CONTENT */
    .content{
      background:var(--glass-bg);
      border:1px solid var(--glass-border);
      border-radius:20px;
      padding:40px;
      min-height:500px;
      backdrop-filter:blur(10px);
    }

    .soulmark-display{
      background:rgba(255,255,255,.05);
      padding:30px;
      border-radius:15px;
      margin-bottom:30px;
      border:2px solid var(--ia-orange);
    }

    .soulmark-hash{
      font-family:"Courier New",monospace;
      font-size:1.2em;
      background:rgba(0,0,0,.4);
      padding:14px;
      border-radius:10px;
      margin:12px 0;
      color:var(--ia-gold);
      word-break:break-all;
    }

    .status-badge{
      display:inline-block;
      padding:6px 16px;
      border-radius:25px;
      font-size:.9em;
      font-weight:bold;
      background:var(--verified-green);
      color:white;
    }

    .identity-info{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:20px;
    }

    .info-card{
      padding:20px;
      background:rgba(255,255,255,.05);
      border-radius:12px;
      border-left:4px solid var(--ia-orange);
    }

    .info-card label{
      display:block;
      font-size:.85em;
      opacity:.7;
      margin-bottom:6px;
    }

    /* FOOTER */
    .global-footer{
      margin-top:35px;
      text-align:center;
      padding:20px 0;
    }

    .footer-links{
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap:12px;
    }

    .footer-links a,
    .logout-btn{
      padding:12px 22px;
      background:linear-gradient(135deg,var(--ia-orange),var(--ia-orange-light));
      border-radius:30px;
      font-weight:700;
      text-decoration:none;
      color:#000;
      min-width:150px;
      display:inline-block;
      cursor:pointer;
      border:none;
      transition:0.3s ease;
    }

    .footer-links a:hover,
    .logout-btn:hover{
      transform:translateY(-4px);
      box-shadow:0 0 18px rgba(244,163,73,0.35);
    }

  </style>
</head>

<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <h1>iAscendAi â€” Digital Identity Dashboard</h1>
    <p class="tagline">Verified â€¢ Authentic â€¢ Secure</p>
  </div>

  <!-- TOP NAVIGATION (REAL LINKS NOW) -->
  <div class="tabs">
    <a class="tab-link" href="iascendai-dashboard.html">My SoulMarkâ“ˆ</a>
    <a class="tab-link" href="soulaid.html">SoulAidâ“ˆ</a>
    <a class="tab-link" href="tracker.html">SoulTrackerâ“ˆ</a>
    <a class="tab-link" href="updates.html">Updates</a>
    <a class="tab-link" href="settings.html">Settings</a>
  </div>

  <!-- MAIN CONTENT -->
  <div class="content">
    <h2>ðŸ’  Your SoulMarkâ“ˆ Identity</h2>

    <div class="soulmark-display">
      <p><strong>Status:</strong> <span class="status-badge">âœ“ VERIFIED</span></p>
      <p><strong>Your SoulMarkâ“ˆ Hash:</strong></p>
      <div class="soulmark-hash" id="soulmark-hash">Loading...</div>
    </div>

    <div class="identity-info">
      <div class="info-card"><label>Name</label><value id="user-name">Loading...</value></div>
      <div class="info-card"><label>Username</label><value id="user-username">Loading...</value></div>
      <div class="info-card"><label>Type</label><value id="identity-type">Supporterâ“ˆ</value></div>
      <div class="info-card"><label>Registered</label><value id="reg-date">Loading...</value></div>
    </div>

  </div>

  <!-- GLOBAL FOOTER -->
  <div class="global-footer">
    <div class="footer-links">
      <a href="iascendai-verify.html">Verify SoulMarkâ“ˆ</a>
      <a href="soulregistry.html">SoulRegistryâ“ˆ</a>
      <a href="tracker.html">SoulTrackerâ“ˆ</a>
      <a href="index.html">Donate</a>
      <button class="logout-btn" onclick="logoutUser()">ðŸšª Logout</button>
    </div>
  </div>

</div>

<!-- JS -->
<script type="module">
  import { CONFIG } from "./config.js";
  const BACKEND_URL = CONFIG.BACKEND_URL;

  document.addEventListener("DOMContentLoaded", async () => {

    let username = localStorage.getItem("username");
    let name = localStorage.getItem("name");
    let soulmark = localStorage.getItem("soulmark");

    // Pull from registry
    if (username) {
      try {
        const res = await fetch(`${BACKEND_URL}/registry`);
        const registry = await res.json();
        const identity = registry.find(r => r.type === "identity" && r.username === username);
        if (identity) {
          name = identity.name;
          soulmark = identity.soulmark;
        }
      } catch (err) {
        console.warn("Registry fetch failed", err);
      }
    }

    document.getElementById("soulmark-hash").textContent = soulmark || "Not found";
    document.getElementById("user-name").textContent = name || "Unknown";
    document.getElementById("user-username").textContent = username ? `${username}@iascendai` : "Anonymous";
    document.getElementById("identity-type").textContent = "Supporterâ“ˆ";
    document.getElementById("reg-date").textContent = new Date().toLocaleDateString();
  });

  window.logoutUser = function(){
    localStorage.clear();
    window.location.href = "index.html";
  };
</script>

</body>
</html>
